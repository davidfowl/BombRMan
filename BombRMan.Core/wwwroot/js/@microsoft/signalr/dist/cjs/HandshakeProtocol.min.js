/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/@microsoft/signalr@6.0.4/dist/cjs/HandshakeProtocol.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HandshakeProtocol=void 0;const TextMessageFormat_1=require("./TextMessageFormat"),Utils_1=require("./Utils");class HandshakeProtocol{writeHandshakeRequest(e){return TextMessageFormat_1.TextMessageFormat.write(JSON.stringify(e))}parseHandshakeResponse(e){let r,s;if(Utils_1.isArrayBuffer(e)){const t=new Uint8Array(e),o=t.indexOf(TextMessageFormat_1.TextMessageFormat.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;r=String.fromCharCode.apply(null,Array.prototype.slice.call(t.slice(0,a))),s=t.byteLength>a?t.slice(a).buffer:null}else{const t=e,o=t.indexOf(TextMessageFormat_1.TextMessageFormat.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const a=o+1;r=t.substring(0,a),s=t.length>a?t.substring(a):null}const t=TextMessageFormat_1.TextMessageFormat.parse(r),o=JSON.parse(t[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[s,o]}}exports.HandshakeProtocol=HandshakeProtocol;
//# sourceMappingURL=/sm/ef12153ba6cae79563d2c6d0e6d916ef042a8344db1ac4f2778c75f81f206407.map