/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/@microsoft/signalr@6.0.4/dist/esm/XhrHttpClient.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{AbortError,HttpError,TimeoutError}from"./Errors";import{HttpClient,HttpResponse}from"./HttpClient";import{LogLevel}from"./ILogger";export class XhrHttpClient extends HttpClient{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new AbortError):e.method?e.url?new Promise(((t,r)=>{const o=new XMLHttpRequest;o.open(e.method,e.url,!0),o.withCredentials=void 0===e.withCredentials||e.withCredentials,o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-Type","text/plain;charset=UTF-8");const s=e.headers;s&&Object.keys(s).forEach((e=>{o.setRequestHeader(e,s[e])})),e.responseType&&(o.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{o.abort(),r(new AbortError)}),e.timeout&&(o.timeout=e.timeout),o.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),o.status>=200&&o.status<300?t(new HttpResponse(o.status,o.statusText,o.response||o.responseText)):r(new HttpError(o.response||o.responseText||o.statusText,o.status))},o.onerror=()=>{this._logger.log(LogLevel.Warning,`Error from HTTP request. ${o.status}: ${o.statusText}.`),r(new HttpError(o.statusText,o.status))},o.ontimeout=()=>{this._logger.log(LogLevel.Warning,"Timeout from HTTP request."),r(new TimeoutError)},o.send(e.content||"")})):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}
//# sourceMappingURL=/sm/d6717f4de7c44c794dc73b0c2d024d73681175be4629bbfbdb9f23df6537a60a.map